{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport CustomAddButton from \"../../components/customAddButton\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Search = function Search() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      userList = _useState2[0],\n      setUserList = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filterUserList = _useState4[0],\n      setFilterUserList = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      search = _useState6[0],\n      setSearch = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      requestedUserID = _useState8[0],\n      setRequestedUserID = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      errorMess = _useState10[0],\n      setErrorMess = _useState10[1];\n\n  var getAllUsers = function getAllUsers() {\n    var value;\n    return _regeneratorRuntime.async(function getAllUsers$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context.sent;\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/search\", {\n              'headers': {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                return response.json();\n              } else if (response.status === 401) {\n                _this.props.navigation.navigate(\"Login\");\n              } else {\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              setUserList(responseJson);\n              setFilterUserList(responseJson);\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var checkLoggedIn = function checkLoggedIn() {\n    var value;\n    return _regeneratorRuntime.async(function checkLoggedIn$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context2.sent;\n\n            if (value == null) {\n              _this.props.navigation.navigate('Login');\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var searchFilter = function searchFilter(text) {\n    if (text) {\n      var newData = userList.filter(function (item) {\n        var itemData = item.user_givenname ? item.user_givenname.toUpperCase() : ''.toUpperCase();\n        var textData = text.toUpperCase();\n        return itemData.indexOf(textData) > -1;\n      });\n      setFilterUserList(newData);\n      setSearch(text);\n    } else {\n      setFilterUserList(userList);\n      setSearch(text);\n    }\n  };\n\n  var onAddFriend = function onAddFriend(requestedUserID) {\n    var value;\n    return _regeneratorRuntime.async(function onAddFriend$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context3.sent;\n            return _context3.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + requestedUserID + \"/friends\", {\n              method: \"POST\",\n              'headers': {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 201 || response.status === 200) {\n                setErrorMess(\"Friend Request Sent!\");\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else if (response.status === 403) {\n                setErrorMess(\"User may already be added.\");\n                throw 'Forbidden - User may already be added';\n              } else if (response.status === 404) {\n                throw 'Not found';\n              } else if (response.status === 500) {\n                throw 'Server Error';\n              } else {\n                console.log(response.status);\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              console.log(response.status);\n              console.log(\"Friend Request Sent\");\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var ItemView = function ItemView(_ref) {\n    var item = _ref.item;\n    return _jsxs(Text, {\n      style: styles.results,\n      children: [item.id, item.user_givenname, ' ', item.user_familyname, ' ', _jsx(CustomAddButton, {\n        onPress: function onPress() {\n          return onAddFriend(item.user_id);\n        }\n      })]\n    });\n  };\n\n  var ItemSeperatorView = function ItemSeperatorView() {\n    return _jsx(View, {\n      style: {\n        height: 0.5,\n        width: '100%',\n        backgroundColor: 'white'\n      }\n    });\n  };\n\n  useEffect(function () {\n    checkLoggedIn();\n    getAllUsers();\n  }, []);\n  return _jsx(SafeAreaView, {\n    style: styles.root,\n    children: _jsx(ScrollView, {\n      children: _jsx(View, {\n        style: styles.header,\n        children: _jsxs(View, {\n          style: styles.container,\n          children: [_jsx(View, {\n            style: styles.titleContainer,\n            children: _jsx(Text, {\n              style: styles.sectionTitle,\n              children: \"Search\"\n            })\n          }), _jsx(Text, {\n            style: styles.text,\n            children: errorMess\n          }), _jsx(TextInput, {\n            style: styles.inputContainer,\n            placeholder: \"Find Friends...\",\n            onChangeText: function onChangeText(text) {\n              return searchFilter(text);\n            },\n            value: search\n          }), _jsx(View, {\n            style: styles.results,\n            children: _jsx(FlatList, {\n              data: filterUserList,\n              keyExtractor: function keyExtractor(item, index) {\n                return index.toString();\n              },\n              ItemSeperatorComponent: ItemSeperatorView,\n              renderItem: ItemView\n            })\n          })]\n        })\n      })\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#ffcfe6'\n  },\n  header: {\n    backgroundColor: \"#45ded0\",\n    height: 200\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: 30\n  },\n  titleContainer: {\n    paddingTop: 80,\n    paddingHorizontal: 40\n  },\n  sectionTitle: {\n    fontSize: 28,\n    color: \"#696969\",\n    fontWeight: \"600\"\n  },\n  results: {\n    fontSize: 16,\n    color: \"#696969\",\n    marginTop: 10,\n    fontWeight: 'bold'\n  },\n  inputContainer: {\n    backgroundColor: '#fff',\n    width: '90%',\n    borderRadius: 60,\n    borderColor: '#45ded0',\n    borderWidth: 2,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 60\n  }\n});\nexport default Search;","map":{"version":3,"sources":["E:/Year 3/Mobile App Dev/MADAssignment/master/screens/Search/Search.js"],"names":["React","useState","useEffect","CustomAddButton","AsyncStorage","Search","userList","setUserList","filterUserList","setFilterUserList","search","setSearch","requestedUserID","setRequestedUserID","errorMess","setErrorMess","getAllUsers","getItem","value","fetch","then","response","status","json","props","navigation","navigate","responseJson","catch","error","console","log","checkLoggedIn","searchFilter","text","newData","filter","item","itemData","user_givenname","toUpperCase","textData","indexOf","onAddFriend","method","err","ItemView","styles","results","id","user_familyname","user_id","ItemSeperatorView","height","width","backgroundColor","root","header","container","titleContainer","sectionTitle","inputContainer","index","toString","StyleSheet","create","flex","justifyContent","alignItems","padding","paddingTop","paddingHorizontal","fontSize","color","fontWeight","marginTop","borderRadius","borderColor","borderWidth","paddingVertical"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport { View, Text, StyleSheet, TextInput, Image, SafeAreaView, FlatList, ScrollView} from 'react-native';\r\nimport CustomAddButton from '../../components/customAddButton';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst Search = () => {\r\n  const [userList, setUserList] = useState('');\r\n  const [filterUserList, setFilterUserList] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [requestedUserID, setRequestedUserID] = useState('');\r\n  const [errorMess, setErrorMess] = useState('');\r\n\r\n  const getAllUsers = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n      return fetch(\"http://localhost:3333/api/1.0.0/search\", {\r\n      //return fetch(\"http://localhost:3333/api/1.0.0/search?q=\" + user_givenname + \"%20\"user_familyname + \"&search_in=all&limit=20&offset=0\", {\r\n          'headers': {\r\n            'X-Authorization':  value\r\n          }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 200){\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              this.props.navigation.navigate(\"Login\");\r\n            }else{\r\n                throw 'Something went wrong';\r\n            }\r\n        })\r\n        .then((responseJson) => {\r\n           //console.log(responseJson);\r\n           setUserList(responseJson);\r\n           setFilterUserList(responseJson);\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        })\r\n  };\r\n\r\n  const checkLoggedIn = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n    if (value == null) {\r\n        this.props.navigation.navigate('Login');\r\n    }\r\n  };\r\n\r\n  const searchFilter = (text) => {\r\n        if (text) {\r\n            const newData = userList.filter((item) => {\r\n                const itemData = item.user_givenname \r\n                    ? item.user_givenname.toUpperCase()\r\n                    : ''.toUpperCase()\r\n                const textData = text.toUpperCase();\r\n                return itemData.indexOf(textData) > -1;\r\n            });\r\n            setFilterUserList(newData);\r\n            setSearch(text);\r\n        } else {\r\n            setFilterUserList(userList);\r\n            setSearch(text);\r\n        }\r\n  }\r\n\r\n  const onAddFriend = async (requestedUserID) => {\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        return fetch(\"http://localhost:3333/api/1.0.0/user/\"+requestedUserID+\"/friends\", {\r\n            method: \"POST\",\r\n            'headers': {\r\n            'X-Authorization':  value\r\n            }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 201 || response.status === 200){\r\n                setErrorMess(\"Friend Request Sent!\");\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              navigation.navigate(\"Login\");\r\n            }else if(response.status === 403){\r\n              setErrorMess(\"User may already be added.\");\r\n              throw 'Forbidden - User may already be added';\r\n            }else if(response.status === 404){\r\n              throw 'Not found';\r\n            }else if(response.status === 500){\r\n              throw 'Server Error';\r\n            }else{\r\n              console.log(response.status)\r\n              throw 'Something went wrong';\r\n            }\r\n        }).then((responseJson) => {\r\n            console.log(response.status)\r\n            console.log(\"Friend Request Sent\")\r\n        }).catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t})\r\n    }\r\n\r\n  const ItemView = ({item}) => {\r\n    return (\r\n        <Text style={styles.results}>\r\n        {item.id}{item.user_givenname}{' '}{item.user_familyname}{' '}<CustomAddButton onPress={() => onAddFriend(item.user_id)} />\r\n        </Text>\r\n    );\r\n  }\r\n\r\n  const ItemSeperatorView = () => {\r\n    return (\r\n        <View \r\n            style={{height: 0.5, width: '100%', backgroundColor: 'white'}}\r\n        />\r\n    );\r\n  }\r\n\r\n   useEffect(() => {\r\n        checkLoggedIn();\r\n        getAllUsers();\r\n    }, []);\r\n\r\n    return (\r\n\t\t<SafeAreaView style={styles.root}>\r\n        <ScrollView>\r\n            <View style={styles.header}>\r\n                <View style={styles.container}>\r\n                    {/*Search Page*/}\r\n                    <View style={styles.titleContainer}>\r\n                        <Text style={styles.sectionTitle}>Search</Text>\r\n\t\t\t        </View>\r\n                    <Text style={styles.text}>{errorMess}</Text>\r\n                    {/*Text Input for Searching for friends*/}\r\n\t\t\t        <TextInput style={styles.inputContainer} placeholder=\"Find Friends...\" onChangeText={(text) => searchFilter(text)} value={search}/>\r\n                    <View style={styles.results}>\r\n                        <FlatList\r\n                            data={filterUserList}\r\n                            keyExtractor={(item, index) => index.toString()}\r\n                            ItemSeperatorComponent={ItemSeperatorView}\r\n                            renderItem={ItemView}\r\n                        />\r\n                    </View>\r\n                </View>\r\n            </View>\r\n        </ScrollView>\r\n\t\t</SafeAreaView>\r\n\t);\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\troot: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: '#ffcfe6',\r\n\t},\r\n\theader:{\r\n        backgroundColor: \"#45ded0\",\r\n        height:200,\r\n    },\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'flex-start',\r\n\t\talignItems: 'center',\r\n\t\tpadding: 30\r\n\t},\r\n\ttitleContainer: {\r\n\t\tpaddingTop: 80,\r\n\t\tpaddingHorizontal: 40,\r\n\t},\r\n\tsectionTitle: {\r\n\t\tfontSize:28,\r\n        color: \"#696969\",\r\n        fontWeight: \"600\"\r\n\t},\r\n    results: {\r\n        fontSize:16,\r\n        color: \"#696969\",\r\n        marginTop:10,\r\n        fontWeight: 'bold'\r\n    },\r\n    inputContainer: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\twidth: '90%',\r\n\t\tborderRadius: 60,\r\n\t\tborderColor: '#45ded0',\r\n\t\tborderWidth: 2,\t\r\n        paddingHorizontal: 20,\r\n\t\tpaddingVertical: 10,\r\n\t\tborderRadius: 60,\r\n    }\r\n});\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}