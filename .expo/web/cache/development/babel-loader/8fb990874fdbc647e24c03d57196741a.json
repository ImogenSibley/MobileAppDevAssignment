{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { Component } from 'react';\nimport { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport CustomInput from \"../../components/customInput\";\nimport CustomButton from \"../../components/customButton\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar Home = function Home() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      firstName = _useState2[0],\n      setFirstName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      post = _useState4[0],\n      setPost = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      posts = _useState6[0],\n      setPosts = _useState6[1];\n\n  var getFirstName = function getFirstName() {\n    var value, userID;\n    return _regeneratorRuntime.async(function getFirstName$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_id'));\n\n          case 5:\n            userID = _context.sent;\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\n              'headers': {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else {\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              var first = responseJson.first_name;\n              setFirstName(first);\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getAllPosts = function getAllPosts() {\n    var value, userID;\n    return _regeneratorRuntime.async(function getAllPosts$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context3.sent;\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_id'));\n\n          case 5:\n            userID = _context3.sent;\n            return _context3.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID + \"/post\", {\n              'headers': {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                return response.json();\n              } else if (response.status === 401) {\n                _this.props.navigation.navigate(\"Login\");\n              } else {\n                throw 'Something went wrong';\n              }\n            }).then(function _callee(responseJson) {\n              var postID, postText, postTimeStamp, postAuthor, numberOfLikes;\n              return _regeneratorRuntime.async(function _callee$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      console.log(responseJson.text);\n                      postID = responseJson.post_id;\n                      postText = responseJson.text;\n                      setPost(postText);\n                      console.log(post);\n                      setPosts([].concat(_toConsumableArray(posts), [post]));\n                      postTimeStamp = responseJson.timestamp;\n                      postAuthor = responseJson.author;\n                      numberOfLikes = responseJson.numLikes;\n\n                    case 9:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var checkLoggedIn = function checkLoggedIn() {\n    var value;\n    return _regeneratorRuntime.async(function checkLoggedIn$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context4.sent;\n\n            if (value == null) {\n              navigation.navigate('Login');\n            }\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    checkLoggedIn();\n    getFirstName();\n    getAllPosts();\n  }, []);\n  return _jsx(SafeAreaView, {\n    style: styles.root,\n    children: _jsx(View, {\n      style: styles.header,\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(View, {\n          style: styles.titleContainer,\n          children: _jsxs(Text, {\n            style: styles.sectionTitle,\n            children: [\"Welcome back \", firstName, \"!\"]\n          })\n        }), _jsx(CustomInput, {\n          placeholder: \"Write your post here...\"\n        }), _jsx(CustomButton, {\n          text: \"Post\"\n        }), _jsx(Text, {\n          style: styles.sectionTitle,\n          children: post\n        })]\n      })\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#ffcfe6'\n  },\n  header: {\n    backgroundColor: \"#45ded0\",\n    height: 200\n  },\n  body: {\n    marginTop: 40\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    padding: 30\n  },\n  titleContainer: {\n    paddingTop: 80,\n    paddingHorizontal: 40,\n    padding: 30\n  },\n  sectionTitle: {\n    fontSize: 28,\n    color: \"#696969\",\n    fontWeight: \"600\"\n  }\n});\nexport default Home;","map":{"version":3,"sources":["E:/Year 3/Mobile App Dev/MADAssignment/master/screens/Home/Home.js"],"names":["React","Component","useState","useEffect","AsyncStorage","CustomInput","CustomButton","Home","firstName","setFirstName","post","setPost","posts","setPosts","getFirstName","getItem","value","userID","fetch","then","response","status","json","navigation","navigate","responseJson","first","first_name","catch","error","console","log","getAllPosts","props","text","postID","post_id","postText","postTimeStamp","timestamp","postAuthor","author","numberOfLikes","numLikes","checkLoggedIn","styles","root","header","container","titleContainer","sectionTitle","StyleSheet","create","flex","backgroundColor","height","body","marginTop","alignItems","padding","paddingTop","paddingHorizontal","fontSize","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, Image, SafeAreaView, FlatList} from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport CustomInput from '../../components/customInput';\r\nimport CustomButton from '../../components/customButton';\r\n\r\nconst Home = () => {\r\n\tconst [firstName, setFirstName] = useState('');\r\n    const [post, setPost] = useState('');\r\n    const [posts, setPosts] = useState([]);\r\n\r\n\tconst getFirstName = async () => {\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        const userID = await AsyncStorage.getItem('@user_id')\r\n        return fetch(\"http://localhost:3333/api/1.0.0/user/\"+userID, {\r\n            'headers': {\r\n            'X-Authorization':  value\r\n            }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 200){\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              navigation.navigate(\"Login\");\r\n            }else{\r\n                throw 'Something went wrong';\r\n            }\r\n        }).then((responseJson) => {\r\n            //console.log(responseJson);\r\n            let first = responseJson.first_name; \r\n            setFirstName(first);\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    const getAllPosts = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n        const userID = await AsyncStorage.getItem('@user_id')\r\n        return fetch(\"http://localhost:3333/api/1.0.0/user/\"+userID+\"/post\", {\r\n            'headers': {\r\n            'X-Authorization':  value\r\n            }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 200){\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              this.props.navigation.navigate(\"Login\");\r\n            }else{\r\n                throw 'Something went wrong';\r\n            }\r\n        }).then(async (responseJson) => {\r\n            console.log(responseJson.text);\r\n            let postID = responseJson.post_id;\r\n            let postText = responseJson.text;\r\n            setPost(postText);\r\n            console.log(post);\r\n            setPosts([...posts, post])\r\n            let postTimeStamp = responseJson.timestamp;\r\n            let postAuthor = responseJson.author;\r\n            let numberOfLikes = responseJson.numLikes;\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        })\r\n    }\r\n    \r\n    const checkLoggedIn = async () => {\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        if (value == null) {\r\n            navigation.navigate('Login');\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        checkLoggedIn();\r\n        getFirstName();\r\n        getAllPosts();\r\n    }, [])\r\n\r\n      return (\r\n        <SafeAreaView style={styles.root}>\r\n        <View style={styles.header}>\r\n\t\t\t<View style={styles.container}>\r\n\t\t\t{/*Spacebook Logo*/}\r\n\t\t\t{/*Homepage*/}\r\n                <View style={styles.titleContainer}>\r\n                    <Text style={styles.sectionTitle}>Welcome back {firstName}!</Text>\r\n\t\t\t    </View>\r\n          \r\n\t\t\t    {/*Text Input for Writing a Post*/}\r\n\t\t\t    <CustomInput placeholder=\"Write your post here...\"/>\r\n\t\t\t    {/*Button to Post*/}\r\n\t\t\t    <CustomButton text=\"Post\"/>\r\n                {/*Posts go here*/}\r\n                <Text style={styles.sectionTitle}>{post}</Text>\r\n\t\t\t</View>\r\n        </View>\r\n\t\t</SafeAreaView>\r\n      );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\troot: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: '#ffcfe6',\r\n\t},\r\n     header:{\r\n        backgroundColor: \"#45ded0\",\r\n        height:200,\r\n    },\r\n    body:{\r\n        marginTop:40,\r\n    },\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n        alignItems: 'center',\r\n        padding:30,\r\n\t},\r\n\ttitleContainer: {\r\n\t\tpaddingTop: 80,\r\n\t\tpaddingHorizontal: 40,\r\n        padding: 30,\r\n\t},\r\n\tsectionTitle: {\r\n        fontSize:28,\r\n        color: \"#696969\",\r\n        fontWeight: \"600\"\r\n\t}\r\n});\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}