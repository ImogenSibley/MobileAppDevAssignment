{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport CustomInput from \"../../components/customInput\";\nimport CustomButton from \"../../components/customButton\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Search = function (_Component) {\n  _inherits(Search, _Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n\n    _this.getData = function _callee() {\n      var value;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 2:\n              value = _context.sent;\n              return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/search\", {\n                'headers': {\n                  'X-Authorization': value\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  return response.json();\n                } else if (response.status === 401) {\n                  _this.props.navigation.navigate(\"Login\");\n                } else {\n                  throw 'Something went wrong';\n                }\n              }).then(function (responseJson) {\n                _this.setState({\n                  isLoading: false,\n                  listData: responseJson\n                });\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.checkLoggedIn = function _callee2() {\n      var value;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 2:\n              value = _context2.sent;\n\n              if (value == null) {\n                _this.props.navigation.navigate('Login');\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      isLoading: true,\n      listData: []\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.unsubscribe = this.props.navigation.addListener('focus', function () {\n        _this2.checkLoggedIn();\n      });\n      this.getData();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n    }\n  }, {\n    key: \"searchFilterFunction\",\n    value: function searchFilterFunction(text) {\n      if (text) {\n        var listData = [this.state.listData];\n        var newData = listData.filter(function (item) {\n          var itemData = item.user_givenname ? item.user_givenname.toUpperCase() : ''.toUpperCase();\n          var textData = text.toUpperCase();\n          return itemData.indexOf(textData) > -1;\n        });\n        setFilteredDataSource(newData);\n        setSearch(text);\n      } else {\n        setFilteredDataSource(masterDataSource);\n        setSearch(text);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLoading) {\n        return _jsx(SafeAreaView, {\n          style: styles.root,\n          children: _jsx(View, {\n            style: styles.container,\n            children: _jsx(Text, {\n              children: \"Loading..\"\n            })\n          })\n        });\n      } else {\n        return _jsx(SafeAreaView, {\n          style: styles.root,\n          children: _jsxs(View, {\n            style: styles.container,\n            children: [_jsx(View, {\n              style: styles.titleContainer,\n              children: _jsx(Text, {\n                style: styles.sectionTitle,\n                children: \"Search\"\n              })\n            }), _jsx(CustomInput, {\n              placeholder: \"Enter a name...\",\n              onChangeText: function onChangeText(text) {\n                return searchFilterFunction(text);\n              }\n            }), _jsx(CustomButton, {\n              text: \"Search\"\n            }), _jsx(FlatList, {\n              data: this.state.listData,\n              renderItem: function renderItem(_ref) {\n                var item = _ref.item;\n                return _jsx(View, {\n                  children: _jsxs(Text, {\n                    style: styles.results,\n                    children: [item.user_givenname, \" \", item.user_familyname]\n                  })\n                });\n              },\n              keyExtractor: function keyExtractor(item, index) {\n                return item.user_id.toString();\n              }\n            })]\n          })\n        });\n      }\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#ffcfe6'\n  },\n  header: {\n    backgroundColor: \"#45ded0\",\n    height: 200\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: 30\n  },\n  titleContainer: {\n    paddingTop: 80,\n    paddingHorizontal: 40\n  },\n  sectionTitle: {\n    fontSize: 28,\n    color: \"#696969\",\n    fontWeight: \"600\"\n  },\n  results: {\n    fontSize: 16,\n    color: \"#696969\",\n    marginTop: 10\n  }\n});\nexport default Search;","map":{"version":3,"sources":["E:/Year 3/Mobile App Dev/MADAssignment/master/screens/Search/Search.js"],"names":["React","Component","CustomInput","CustomButton","AsyncStorage","Search","props","getData","getItem","value","fetch","then","response","status","json","navigation","navigate","responseJson","setState","isLoading","listData","catch","error","console","log","checkLoggedIn","state","unsubscribe","addListener","text","newData","filter","item","itemData","user_givenname","toUpperCase","textData","indexOf","setFilteredDataSource","setSearch","masterDataSource","styles","root","container","titleContainer","sectionTitle","searchFilterFunction","results","user_familyname","index","user_id","toString","StyleSheet","create","flex","backgroundColor","header","height","justifyContent","alignItems","padding","paddingTop","paddingHorizontal","fontSize","color","fontWeight","marginTop"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { View, Text, StyleSheet, TextInput, Image, SafeAreaView, FlatList} from 'react-native';\r\nimport CustomInput from '../../components/customInput';\r\nimport CustomButton from '../../components/customButton';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nclass Search extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      isLoading: true,\r\n      listData: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.unsubscribe = this.props.navigation.addListener('focus', () => {\r\n      this.checkLoggedIn();\r\n    });\r\n  \r\n    this.getData();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n  }\r\n\r\n  getData = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n    return fetch(\"http://localhost:3333/api/1.0.0/search\", {\r\n          'headers': {\r\n            'X-Authorization':  value\r\n          }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 200){\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              this.props.navigation.navigate(\"Login\");\r\n            }else{\r\n                throw 'Something went wrong';\r\n            }\r\n        })\r\n        .then((responseJson) => {\r\n          this.setState({\r\n            isLoading: false,\r\n            listData: responseJson\r\n          })\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        })\r\n  }\r\n\r\n  checkLoggedIn = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n    if (value == null) {\r\n        this.props.navigation.navigate('Login');\r\n    }\r\n  };\r\n\r\n  searchFilterFunction(text) {\r\n        if (text) {\r\n            const listData = [this.state.listData];\r\n            const newData = listData.filter(\r\n                function (item) {\r\n                    const itemData = item.user_givenname\r\n                    ? item.user_givenname.toUpperCase()\r\n                    : ''.toUpperCase();\r\n                const textData = text.toUpperCase();\r\n                return itemData.indexOf(textData) > -1;\r\n                }\r\n            );\r\n            setFilteredDataSource(newData);\r\n            setSearch(text);\r\n        } else {\r\n            setFilteredDataSource(masterDataSource);\r\n            setSearch(text);\r\n        }\r\n  };\r\n\r\n  render() {\r\n\r\n    if (this.state.isLoading){\r\n      return (\r\n        <SafeAreaView style={styles.root}>\r\n        <View style={styles.container}>\r\n          <Text>Loading..</Text>\r\n        </View>\r\n        </SafeAreaView>\r\n      );\r\n    }else{\r\n      return (\r\n        <SafeAreaView style={styles.root}>\r\n        <View style={styles.container}>\r\n\t\t\t{/*Spacebook Logo*/}\r\n\t\t\t{/*Search Page*/}\r\n            <View style={styles.titleContainer}>\r\n                <Text style={styles.sectionTitle}>Search</Text>\r\n\t\t\t</View>\r\n          \r\n\t\t\t{/*Text Input for Searching for friends*/}\r\n\t\t\t<CustomInput placeholder=\"Enter a name...\" onChangeText={(text) => searchFilterFunction(text)}/>\r\n\t\t\t{/*Button to Search*/}\r\n\t\t\t<CustomButton text=\"Search\"/>\r\n            <FlatList\r\n                data={this.state.listData}\r\n                //if input matches results, display results\r\n                renderItem={({item}) => (\r\n                    <View>\r\n                      <Text style={styles.results}>{item.user_givenname} {item.user_familyname}</Text>\r\n                    </View>\r\n                )}\r\n                keyExtractor={(item,index) => item.user_id.toString()}\r\n              />\r\n        </View>\r\n        </SafeAreaView>\r\n      );\r\n    }\r\n    \r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\troot: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: '#ffcfe6',\r\n\t},\r\n\theader:{\r\n        backgroundColor: \"#45ded0\",\r\n        height:200,\r\n    },\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'flex-start',\r\n\t\talignItems: 'center',\r\n\t\tpadding: 30\r\n\t},\r\n\ttitleContainer: {\r\n\t\tpaddingTop: 80,\r\n\t\tpaddingHorizontal: 40,\r\n\t},\r\n\tsectionTitle: {\r\n\t\tfontSize:28,\r\n        color: \"#696969\",\r\n        fontWeight: \"600\"\r\n\t},\r\n    results: {\r\n        fontSize:16,\r\n        color: \"#696969\",\r\n        marginTop:10\r\n    }\r\n});\r\n\r\nexport default Search;"]},"metadata":{},"sourceType":"module"}