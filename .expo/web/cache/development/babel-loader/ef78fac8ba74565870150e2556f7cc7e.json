{"ast":null,"code":"var _this = this;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { Component } from 'react';\nimport { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport CustomInput from \"../../components/customInput\";\nimport CustomButton from \"../../components/customButton\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Home = function Home(_ref) {\n  var navigation = _ref.navigation;\n\n  var componentDidMount = function componentDidMount() {\n    _this.unsubscribe = _this.props.navigation.addListener('focus', function () {\n      _this.checkLoggedIn();\n    });\n\n    _this.getData();\n  };\n\n  var componentWillUnmount = function componentWillUnmount() {\n    _this.unsubscribe();\n  };\n\n  var getData = function getData() {\n    var value;\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context.sent;\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/search\", {\n              'headers': {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                return response.json();\n              } else if (response.status === 401) {\n                _this.props.navigation.navigate(\"Login\");\n              } else {\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              _this.setState({\n                isLoading: false,\n                listData: responseJson\n              });\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var checkLoggedIn = function checkLoggedIn() {\n    var value;\n    return _regeneratorRuntime.async(function checkLoggedIn$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context2.sent;\n\n            if (value == null) {\n              _this.props.navigation.navigate('Login');\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getUserInfo = function getUserInfo() {\n    var userFirst, parsedUserFirst;\n    return _regeneratorRuntime.async(function getUserInfo$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_givenname'));\n\n          case 2:\n            userFirst = _context3.sent;\n            parsedUserFirst = JSON.parse(userFirst);\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (_this.state.isLoading) {\n    return _jsx(SafeAreaView, {\n      style: styles.root,\n      children: _jsx(View, {\n        style: styles.container,\n        children: _jsx(View, {\n          style: styles.titleContainer,\n          children: _jsx(Text, {\n            style: styles.sectionTitle,\n            children: \"Loading...\"\n          })\n        })\n      })\n    });\n  } else {\n    return _jsx(SafeAreaView, {\n      style: styles.root,\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(View, {\n          style: styles.titleContainer,\n          children: _jsx(Text, {\n            style: styles.sectionTitle,\n            children: \"User's Name\"\n          })\n        }), _jsx(CustomInput, {\n          placeholder: \"Write your post here...\"\n        }), _jsx(CustomButton, {\n          text: \"Post\"\n        })]\n      })\n    });\n  }\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#ffcfe6'\n  },\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: 30\n  },\n  titleContainer: {\n    paddingTop: 80,\n    paddingHorizontal: 40\n  },\n  sectionTitle: {\n    fontSize: 24,\n    fontFamily: 'helvetica'\n  }\n});\nexport default Home;","map":{"version":3,"sources":["E:/Year 3/Mobile App Dev/MADAssignment/master/screens/Home/Home.js"],"names":["React","Component","useState","useEffect","AsyncStorage","CustomInput","CustomButton","Home","navigation","componentDidMount","unsubscribe","props","addListener","checkLoggedIn","getData","componentWillUnmount","getItem","value","fetch","then","response","status","json","navigate","responseJson","setState","isLoading","listData","catch","error","console","log","getUserInfo","userFirst","parsedUserFirst","JSON","parse","state","styles","root","container","titleContainer","sectionTitle","StyleSheet","create","flex","backgroundColor","justifyContent","alignItems","padding","paddingTop","paddingHorizontal","fontSize","fontFamily"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;;;;;;;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,OAAOC,WAAP;AACA,OAAOC,YAAP;;;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAK/B,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B,IAAA,KAAI,CAACC,WAAL,GAAmB,KAAI,CAACC,KAAL,CAAWH,UAAX,CAAsBI,WAAtB,CAAkC,OAAlC,EAA2C,YAAM;AAClE,MAAA,KAAI,CAACC,aAAL;AACD,KAFkB,CAAnB;;AAIA,IAAA,KAAI,CAACC,OAAL;AACD,GAND;;AAQA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACjC,IAAA,KAAI,CAACL,WAAL;AACD,GAFD;;AAIA,MAAMI,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACMV,YAAY,CAACY,OAAb,CAAqB,gBAArB,CADN;;AAAA;AACRC,YAAAA,KADQ;AAAA,6CAEPC,KAAK,CAAC,wCAAD,EAA2C;AACjD,yBAAW;AACT,mCAAoBD;AADX;AADsC,aAA3C,CAAL,CAKFE,IALE,CAKG,UAACC,QAAD,EAAc;AAChB,kBAAGA,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA2B;AACvB,uBAAOD,QAAQ,CAACE,IAAT,EAAP;AACH,eAFD,MAEM,IAAGF,QAAQ,CAACC,MAAT,KAAoB,GAAvB,EAA2B;AAC/B,gBAAA,KAAI,CAACV,KAAL,CAAWH,UAAX,CAAsBe,QAAtB,CAA+B,OAA/B;AACD,eAFK,MAED;AACD,sBAAM,sBAAN;AACH;AACJ,aAbE,EAcFJ,IAdE,CAcG,UAACK,YAAD,EAAkB;AACtB,cAAA,KAAI,CAACC,QAAL,CAAc;AACZC,gBAAAA,SAAS,EAAE,KADC;AAEZC,gBAAAA,QAAQ,EAAEH;AAFE,eAAd;AAID,aAnBE,EAoBFI,KApBE,CAoBI,UAACC,KAAD,EAAW;AACdC,cAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,aAtBE,CAFO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AA2BA,MAAMhB,aAAa,GAAG,SAAhBA,aAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACAT,YAAY,CAACY,OAAb,CAAqB,gBAArB,CADA;;AAAA;AACdC,YAAAA,KADc;;AAEpB,gBAAIA,KAAK,IAAI,IAAb,EAAmB;AACf,cAAA,KAAI,CAACN,KAAL,CAAWH,UAAX,CAAsBe,QAAtB,CAA+B,OAA/B;AACH;;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAOA,MAAMS,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACM5B,YAAY,CAAEY,OAAd,CAAsB,iBAAtB,CADN;;AAAA;AACZiB,YAAAA,SADY;AAEZC,YAAAA,eAFY,GAEMC,IAAI,CAAEC,KAAN,CAAYH,SAAZ,CAFN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAKE,MAAI,KAAI,CAACI,KAAL,CAAWX,SAAf,EAAyB;AACvB,WACE,KAAC,YAAD;AAAc,MAAA,KAAK,EAAEY,MAAM,CAACC,IAA5B;AAAA,gBACD,KAAC,IAAD;AAAM,QAAA,KAAK,EAAED,MAAM,CAACE,SAApB;AAAA,kBAEA,KAAC,IAAD;AAAM,UAAA,KAAK,EAAEF,MAAM,CAACG,cAApB;AAAA,oBACC,KAAC,IAAD;AAAM,YAAA,KAAK,EAAEH,MAAM,CAACI,YAApB;AAAA;AAAA;AADD;AAFA;AADC,MADF;AAUD,GAXD,MAWK;AACH,WACE,KAAC,YAAD;AAAc,MAAA,KAAK,EAAEJ,MAAM,CAACC,IAA5B;AAAA,gBACL,MAAC,IAAD;AAAM,QAAA,KAAK,EAAED,MAAM,CAACE,SAApB;AAAA,mBAGS,KAAC,IAAD;AAAM,UAAA,KAAK,EAAEF,MAAM,CAACG,cAApB;AAAA,oBACI,KAAC,IAAD;AAAM,YAAA,KAAK,EAAEH,MAAM,CAACI,YAApB;AAAA;AAAA;AADJ,UAHT,EAQA,KAAC,WAAD;AAAa,UAAA,WAAW,EAAC;AAAzB,UARA,EAUA,KAAC,YAAD;AAAc,UAAA,IAAI,EAAC;AAAnB,UAVA;AAAA;AADK,MADF;AAkBH;AACF,CAvFD;;AAyFA,IAAMJ,MAAM,GAAGK,UAAU,CAACC,MAAX,CAAkB;AAChCL,EAAAA,IAAI,EAAE;AACLM,IAAAA,IAAI,EAAE,CADD;AAELC,IAAAA,eAAe,EAAE;AAFZ,GAD0B;AAShCN,EAAAA,SAAS,EAAE;AACVK,IAAAA,IAAI,EAAE,CADI;AAEVE,IAAAA,cAAc,EAAE,YAFN;AAGVC,IAAAA,UAAU,EAAE,QAHF;AAIVC,IAAAA,OAAO,EAAE;AAJC,GATqB;AAehCR,EAAAA,cAAc,EAAE;AACfS,IAAAA,UAAU,EAAE,EADG;AAEfC,IAAAA,iBAAiB,EAAE;AAFJ,GAfgB;AAmBhCT,EAAAA,YAAY,EAAE;AACbU,IAAAA,QAAQ,EAAE,EADG;AAEbC,IAAAA,UAAU,EAAE;AAFC;AAnBkB,CAAlB,CAAf;AAyBA,eAAe9C,IAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, Image, SafeAreaView, FlatList} from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport CustomInput from '../../components/customInput';\r\nimport CustomButton from '../../components/customButton';\r\n\r\nconst Home = ({ navigation }) => {\r\n\r\n    //const [post, setPost] = useState(\"\")\r\n    //const [posts, setPosts] = useState([])\r\n\r\n  const componentDidMount = () => {\r\n    this.unsubscribe = this.props.navigation.addListener('focus', () => {\r\n      this.checkLoggedIn();\r\n    });\r\n  \r\n    this.getData();\r\n  }\r\n\r\n  const componentWillUnmount = () => {\r\n    this.unsubscribe();\r\n  }\r\n\r\n  const getData = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n    return fetch(\"http://localhost:3333/api/1.0.0/search\", {\r\n          'headers': {\r\n            'X-Authorization':  value\r\n          }\r\n        })\r\n        .then((response) => {\r\n            if(response.status === 200){\r\n                return response.json()\r\n            }else if(response.status === 401){\r\n              this.props.navigation.navigate(\"Login\");\r\n            }else{\r\n                throw 'Something went wrong';\r\n            }\r\n        })\r\n        .then((responseJson) => {\r\n          this.setState({\r\n            isLoading: false,\r\n            listData: responseJson\r\n          })\r\n        })\r\n        .catch((error) => {\r\n            console.log(error);\r\n        })\r\n  }\r\n\r\n  const checkLoggedIn = async () => {\r\n    const value = await AsyncStorage.getItem('@session_token');\r\n    if (value == null) {\r\n        this.props.navigation.navigate('Login');\r\n    }\r\n  };\r\n\r\n  const getUserInfo = async () => {\r\n      let userFirst = await AsyncStorage. getItem('@user_givenname');\r\n      let parsedUserFirst = JSON. parse(userFirst);\r\n  }\r\n\r\n    if (this.state.isLoading){\r\n      return (\r\n        <SafeAreaView style={styles.root}>\r\n\t\t\t    <View style={styles.container}>\r\n\t\t\t    {/*Loading Title*/}\r\n\t\t\t    <View style={styles.titleContainer}>\r\n\t\t\t\t    <Text style={styles.sectionTitle}>Loading...</Text>\r\n\t\t\t    </View>\r\n\t\t\t    </View>\r\n\t\t    </SafeAreaView>\r\n      );\r\n    }else{\r\n      return (\r\n        <SafeAreaView style={styles.root}>\r\n\t\t\t<View style={styles.container}>\r\n\t\t\t{/*Spacebook Logo*/}\r\n\t\t\t{/*Homepage*/}\r\n            <View style={styles.titleContainer}>\r\n                <Text style={styles.sectionTitle}>User's Name</Text>\r\n\t\t\t</View>\r\n          \r\n\t\t\t{/*Text Input for Writing a Post*/}\r\n\t\t\t<CustomInput placeholder=\"Write your post here...\"/>\r\n\t\t\t{/*Button to Post*/}\r\n\t\t\t<CustomButton text=\"Post\"/>\r\n\t\t\t</View>\r\n\r\n            {/*Posts go here*/}\r\n        </SafeAreaView>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\troot: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: '#ffcfe6',\r\n\t},\r\n\t//logo: {\r\n\t//\twidth: 120,\r\n\t//\theight: 120,\r\n\t//},\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'flex-start',\r\n\t\talignItems: 'center',\r\n\t\tpadding: 30\r\n\t},\r\n\ttitleContainer: {\r\n\t\tpaddingTop: 80,\r\n\t\tpaddingHorizontal: 40,\r\n\t},\r\n\tsectionTitle: {\r\n\t\tfontSize: 24,\r\n\t\tfontFamily: 'helvetica',\r\n\t}\r\n});\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}