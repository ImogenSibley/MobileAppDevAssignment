{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as ImagePicker from 'expo-image-picker';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport CustomInput from \"../../components/customInput\";\nimport CustomButton from \"../../components/customButton\";\nimport CustomButtonSmall from \"../../components/customButtonSmall\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar AccountSettings = function AccountSettings() {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      passwordCheck = _useState6[0],\n      setPasswordCheck = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      firstName = _useState8[0],\n      setFirstName = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      lastName = _useState10[0],\n      setLastName = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      errorMess = _useState12[0],\n      setErrorMess = _useState12[1];\n\n  var _useState13 = useState(true),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isLoading = _useState14[0],\n      setIsLoading = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      photo = _useState16[0],\n      setPhoto = _useState16[1];\n\n  useEffect(function () {\n    checkLoggedIn();\n    setIsLoading(false);\n    ImagePicker.getMediaLibraryPermissionsAsync(true);\n    getUserPhoto();\n  }, []);\n\n  var updateAccountDetails = function updateAccountDetails(firstInput, lastInput, emailInput, passInput) {\n    var value, userID;\n    return _regeneratorRuntime.async(function updateAccountDetails$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@session_token\"));\n\n          case 2:\n            value = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@user_id\"));\n\n          case 5:\n            userID = _context.sent;\n            validateEmail(email);\n            console.log(validateEmail(email));\n\n            if (!(validateEmail(email) == true && email != '')) {\n              _context.next = 10;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\n              method: 'PATCH',\n              headers: {\n                \"X-Authorization\": value,\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"email\": emailInput\n              })\n            }).then(function (response) {\n              if (response.status === 200 || response.status === 201) {\n                setErrorMess('Email Updated.');\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else {\n                console.log(response.status);\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              console.log('Email Updated.');\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 10:\n            if (!(password.length >= 6 && password.match(passwordCheck) && password != '' && passwordCheck != '')) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\n              method: 'PATCH',\n              headers: {\n                \"X-Authorization\": value,\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"password\": passInput\n              })\n            }).then(function (response) {\n              if (response.status === 200 || response.status === 201) {\n                setErrorMess('Password Updated.');\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else {\n                console.log(response.status);\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              console.log('Password Updated.');\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 12:\n            if (!(firstName != '')) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\n              method: 'PATCH',\n              headers: {\n                \"X-Authorization\": value,\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"first_name\": firstInput\n              })\n            }).then(function (response) {\n              if (response.status === 200 || response.status === 201) {\n                setErrorMess('First Name Updated.');\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else {\n                console.log(response.status);\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              console.log('First Name Updated.');\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 14:\n            if (!(lastName != '')) {\n              _context.next = 16;\n              break;\n            }\n\n            return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\n              method: 'PATCH',\n              headers: {\n                \"X-Authorization\": value,\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"last_name\": lastInput\n              })\n            }).then(function (response) {\n              if (response.status === 200 || response.status === 201) {\n                setErrorMess('Last Name Updated.');\n                return response.json();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else {\n                console.log(response.status);\n                throw 'Something went wrong';\n              }\n            }).then(function (responseJson) {\n              console.log('Last Name Updated.');\n            }).catch(function (error) {\n              console.log(error);\n            }));\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var validateEmail = function validateEmail(email) {\n    var expression = /(?!.*\\.{2})^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([\\t]*\\r\\n)?[\\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([\\t]*\\r\\n)?[\\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i;\n    return expression.test(String(email).toLowerCase());\n  };\n\n  var checkLoggedIn = function checkLoggedIn() {\n    var value;\n    return _regeneratorRuntime.async(function checkLoggedIn$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context2.sent;\n\n            if (value == null) {\n              navigation.navigate('Login');\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getUserPhoto = function getUserPhoto() {\n    var value, userID;\n    return _regeneratorRuntime.async(function getUserPhoto$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 2:\n            value = _context3.sent;\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_id'));\n\n          case 5:\n            userID = _context3.sent;\n            return _context3.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID + \"/photo\", {\n              method: 'GET',\n              headers: {\n                'X-Authorization': value\n              }\n            }).then(function (response) {\n              if (response.status === 200) {\n                return response.blob();\n              } else if (response.status === 401) {\n                navigation.navigate(\"Login\");\n              } else if (response.status === 404) {\n                setPhoto('https://miro.medium.com/max/3150/1*I8orYDhyFrbI-p21DstL6A.jpeg');\n              } else {\n                throw 'Something went wrong';\n              }\n            }).then(function (responseBlob) {\n              var data = URL.createObjectURL(responseBlob);\n              setPhoto(data);\n              console.log(data);\n              setIsLoading(false);\n            }).catch(function (err) {\n              console.log(\"error\", err);\n            }));\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var choosePhoto = function choosePhoto() {\n    var result;\n    return _regeneratorRuntime.async(function choosePhoto$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context4.sent;\n            console.log(result);\n\n            if (!result.cancelled) {\n              setPhoto(result.uri);\n            }\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var uploadPhoto = function uploadPhoto(data) {\n    var response, profilePicture, value, userID;\n    return _regeneratorRuntime.async(function uploadPhoto$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(fetch(data.base64));\n\n          case 2:\n            response = _context5.sent;\n            _context5.next = 5;\n            return _regeneratorRuntime.awrap(response.blob());\n\n          case 5:\n            profilePicture = _context5.sent;\n            _context5.next = 8;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n          case 8:\n            value = _context5.sent;\n            _context5.next = 11;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_id'));\n\n          case 11:\n            userID = _context5.sent;\n            return _context5.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID + \"/photo\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"image/png\",\n                \"X-Authorization\": value\n              },\n              body: profilePicture\n            }).then(function (response) {\n              console.log(\"Picture added\", response);\n            }).catch(function (err) {\n              console.log(err);\n            }));\n\n          case 13:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  if (isLoading) {\n    return _jsx(SafeAreaView, {\n      style: styles.root,\n      children: _jsx(View, {\n        children: _jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Loading...\"\n        })\n      })\n    });\n  } else {\n    return _jsx(SafeAreaView, {\n      style: styles.root,\n      children: _jsxs(ScrollView, {\n        children: [_jsxs(View, {\n          style: styles.header,\n          children: [_jsx(Image, {\n            style: styles.avatar,\n            source: {\n              uri: photo\n            }\n          }), _jsx(View, {\n            style: styles.titleContainer,\n            children: _jsx(Text, {\n              style: styles.sectionTitle,\n              children: \"Update Account Details\"\n            })\n          })]\n        }), _jsxs(View, {\n          style: styles.body,\n          children: [_jsx(View, {\n            style: styles.container,\n            children: _jsx(Text, {\n              style: styles.post,\n              children: errorMess\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomInput, {\n              placeholder: \"First Name\",\n              value: firstName,\n              setValue: setFirstName\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomInput, {\n              placeholder: \"Last Name\",\n              value: lastName,\n              setValue: setLastName\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomInput, {\n              placeholder: \"Email\",\n              value: email,\n              setValue: setEmail\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomInput, {\n              secureTextEntry: true,\n              placeholder: \"Password\",\n              value: password,\n              setValue: setPassword\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomInput, {\n              secureTextEntry: true,\n              placeholder: \"Confirm Password\",\n              value: passwordCheck,\n              setValue: setPasswordCheck\n            })\n          }), _jsx(View, {\n            style: styles.container,\n            children: _jsx(CustomButton, {\n              text: \"Save Changes\",\n              onPress: function onPress() {\n                return updateAccountDetails(firstName, lastName, email, password, passwordCheck);\n              }\n            })\n          }), _jsxs(View, {\n            style: styles.container,\n            children: [_jsx(CustomButtonSmall, {\n              text: \"Choose Photo\",\n              onPress: choosePhoto\n            }), \" \", _jsx(CustomButtonSmall, {\n              text: \"Upload Photo\",\n              onPress: function onPress() {\n                return uploadPhoto(photo);\n              }\n            })]\n          })]\n        })]\n      })\n    });\n  }\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    backgroundColor: '#ffcfe6'\n  },\n  header: {\n    backgroundColor: \"#45ded0\",\n    height: 200\n  },\n  avatar: {\n    width: 130,\n    height: 130,\n    borderRadius: 63,\n    borderWidth: 4,\n    borderColor: \"white\",\n    marginBottom: 10,\n    alignSelf: 'center',\n    position: 'absolute',\n    marginTop: 130\n  },\n  body: {\n    marginTop: 40\n  },\n  container: {\n    alignItems: 'center',\n    paddingTop: 10\n  },\n  titleContainer: {\n    paddingTop: 80,\n    paddingHorizontal: 40,\n    padding: 30,\n    alignSelf: 'center'\n  },\n  sectionTitle: {\n    fontSize: 28,\n    color: \"#696969\",\n    fontWeight: \"600\",\n    alignItems: 'center'\n  },\n  postContainer: {\n    justifyContent: 'space-between',\n    alignSelf: 'center',\n    alignContent: 'center',\n    backgroundColor: '#ffffff',\n    width: '90%',\n    borderColor: '#45ded0',\n    borderWidth: 1\n  },\n  post: {\n    fontSize: 16,\n    color: \"#696969\",\n    fontWeight: 'bold',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 10\n  }\n});\nexport default AccountSettings;","map":{"version":3,"sources":["E:/Year 3/Mobile App Dev/MADAssignment/master/screens/AccountSettings/AccountSettings.js"],"names":["React","useState","useEffect","ImagePicker","AsyncStorage","CustomInput","CustomButton","CustomButtonSmall","AccountSettings","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","firstName","setFirstName","lastName","setLastName","errorMess","setErrorMess","isLoading","setIsLoading","photo","setPhoto","checkLoggedIn","getMediaLibraryPermissionsAsync","getUserPhoto","updateAccountDetails","firstInput","lastInput","emailInput","passInput","getItem","value","userID","validateEmail","console","log","fetch","method","headers","body","JSON","stringify","then","response","status","json","navigation","navigate","responseJson","catch","error","length","match","expression","test","String","toLowerCase","blob","responseBlob","data","URL","createObjectURL","err","choosePhoto","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uri","uploadPhoto","base64","profilePicture","styles","root","sectionTitle","header","avatar","titleContainer","container","post","StyleSheet","create","flex","backgroundColor","height","width","borderRadius","borderWidth","borderColor","marginBottom","alignSelf","position","marginTop","alignItems","paddingTop","paddingHorizontal","padding","fontSize","color","fontWeight","postContainer","justifyContent","alignContent","paddingVertical"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, SafeAreaView, ScrollView, Platform, Image } from 'react-native';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport CustomInput from '../../components/customInput';\r\nimport CustomButton from '../../components/customButton';\r\nimport CustomButtonSmall from '../../components/customButtonSmall';\r\n\r\nconst AccountSettings = () => {\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n    const [passwordCheck, setPasswordCheck] = useState('');\r\n\tconst [firstName, setFirstName] = useState('');\r\n\tconst [lastName, setLastName] = useState('');\r\n\tconst [errorMess, setErrorMess] = useState('');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [photo, setPhoto] = useState(null);\r\n\r\n    useEffect(() => {\r\n        checkLoggedIn();\r\n        setIsLoading(false);\r\n        ImagePicker.getMediaLibraryPermissionsAsync(true);\r\n        getUserPhoto();\r\n    }, [])\r\n\r\n    const updateAccountDetails = async (firstInput, lastInput, emailInput, passInput) => {\r\n        const value = await AsyncStorage.getItem(\"@session_token\");\r\n        const userID = await AsyncStorage.getItem(\"@user_id\")\r\n\r\n        // Check email is email\r\n\t\tvalidateEmail(email);\r\n\t\tconsole.log(validateEmail(email));\r\n\t\tif (validateEmail(email) == true && email != '') {\r\n            return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    \"X-Authorization\": value,\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"email\": emailInput,\r\n                })\r\n            }).then((response) => {\r\n                if (response.status === 200 || response.status === 201) {\r\n                    setErrorMess('Email Updated.');\r\n                    return response.json()\r\n                } else if (response.status === 401) {\r\n                    navigation.navigate(\"Login\");\r\n                } else {\r\n                    console.log(response.status);\r\n                    throw 'Something went wrong';\r\n                }\r\n            }).then((responseJson) => {\r\n                console.log('Email Updated.');\r\n            }).catch((error) => {\r\n                console.log(error);\r\n            })\r\n        }\r\n        // Check password is greater than 6 chars and matches confirm pass\r\n\t\tif (password.length >= 6 && password.match(passwordCheck) && password != '' && passwordCheck != '') {\r\n            return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    \"X-Authorization\": value,\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"password\": passInput,\r\n                })\r\n            }).then((response) => {\r\n                if (response.status === 200 || response.status === 201) {\r\n                    setErrorMess('Password Updated.');\r\n                    return response.json()\r\n                } else if (response.status === 401) {\r\n                    navigation.navigate(\"Login\");\r\n                } else {\r\n                    console.log(response.status);\r\n                    throw 'Something went wrong';\r\n                }\r\n            }).then((responseJson) => {\r\n                console.log('Password Updated.');\r\n            }).catch((error) => {\r\n                console.log(error);\r\n            })\r\n        }\r\n\r\n        if (firstName != '') {\r\n            return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    \"X-Authorization\": value,\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"first_name\": firstInput,\r\n                })\r\n            }).then((response) => {\r\n                if (response.status === 200 || response.status === 201) {\r\n                    setErrorMess('First Name Updated.');\r\n                    return response.json()\r\n                } else if (response.status === 401) {\r\n                    navigation.navigate(\"Login\");\r\n                } else {\r\n                    console.log(response.status);\r\n                    throw 'Something went wrong';\r\n                }\r\n            }).then((responseJson) => {\r\n                console.log('First Name Updated.');\r\n            }).catch((error) => {\r\n                console.log(error);\r\n            })\r\n        }\r\n\r\n        if (lastName != '') {\r\n            return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    \"X-Authorization\": value,\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    \"last_name\": lastInput,\r\n                })\r\n            }).then((response) => {\r\n                if (response.status === 200 || response.status === 201) {\r\n                    setErrorMess('Last Name Updated.');\r\n                    return response.json()\r\n                } else if (response.status === 401) {\r\n                    navigation.navigate(\"Login\");\r\n                } else {\r\n                    console.log(response.status);\r\n                    throw 'Something went wrong';\r\n                }\r\n            }).then((responseJson) => {\r\n                console.log('Last Name Updated.');\r\n            }).catch((error) => {\r\n                console.log(error);\r\n            })\r\n        }\r\n    }\r\n\r\n\tconst validateEmail = (email) => {\r\n\t\tconst expression = /(?!.*\\.{2})^([a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+(\\.[a-z\\d!#$%&'*+\\-\\/=?^_`{|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+)*|\"((([\\t]*\\r\\n)?[\\t]+)?([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*(([\\t]*\\r\\n)?[\\t]+)?\")@(([a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\d\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.)+([a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF][a-z\\d\\-._~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]*[a-z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])\\.?$/i;\r\n\t\treturn expression.test(String(email).toLowerCase())\r\n\t}\r\n\r\n    const checkLoggedIn = async () => {\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        if (value == null) {\r\n            navigation.navigate('Login');\r\n        }\r\n    };\r\n\r\n    const getUserPhoto = async () => {\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        const userID = await AsyncStorage.getItem('@user_id')\r\n        return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID + \"/photo\", {\r\n            method: 'GET',\r\n            headers: {\r\n                'X-Authorization': value\r\n            }\r\n        })\r\n        .then((response) => {\r\n            if (response.status === 200) {\r\n                return response.blob();\r\n            } else if (response.status === 401) {\r\n                navigation.navigate(\"Login\");\r\n            } else if (response.status === 404) {\r\n                setPhoto('https://miro.medium.com/max/3150/1*I8orYDhyFrbI-p21DstL6A.jpeg');\r\n            } else {\r\n                throw 'Something went wrong';\r\n            }\r\n        })\r\n        .then((responseBlob) => {\r\n            let data = URL.createObjectURL(responseBlob);\r\n            setPhoto(data);\r\n            console.log(data);\r\n            setIsLoading(false);\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"error\", err)\r\n        });\r\n    }\r\n\r\n    const choosePhoto = async () => {\r\n        let result = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: true,\r\n            aspect: [4, 3],\r\n            quality: 1,\r\n        });\r\n        console.log(result);\r\n        if (!result.cancelled) {\r\n            setPhoto(result.uri);\r\n        }\r\n    };\r\n\r\n    const uploadPhoto = async (data) => {\r\n        let response = await fetch(data.base64);\r\n        let profilePicture = await response.blob();\r\n        const value = await AsyncStorage.getItem('@session_token');\r\n        const userID = await AsyncStorage.getItem('@user_id')\r\n        return fetch(\"http://localhost:3333/api/1.0.0/user/\" + userID + \"/photo\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"image/png\",\r\n                \"X-Authorization\": value\r\n            },\r\n            body: profilePicture\r\n        })\r\n        .then((response) => {\r\n            console.log(\"Picture added\", response);\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n\tif (isLoading) {\r\n       return (\r\n            <SafeAreaView style={styles.root}>\r\n                <View><Text style={styles.sectionTitle}>Loading...</Text></View>\r\n            </SafeAreaView>\r\n        );\r\n    } else {\r\n        return (\r\n            <SafeAreaView style={styles.root}>\r\n            <ScrollView>\r\n                <View style={styles.header}>\r\n                    <Image style={styles.avatar} source={{ uri: photo }} /> \r\n                    {/*Update Account Details Page*/}\r\n                    <View style={styles.titleContainer}>\r\n                        <Text style={styles.sectionTitle}>Update Account Details</Text>\r\n                    </View>\r\n                </View>\r\n                    <View style={styles.body}>\r\n                <View style={styles.container}>\r\n                     <Text style={styles.post}>{errorMess}</Text>\r\n                </View>\r\n                <View style={styles.container}>\r\n                     {/*Text Input for Updating Details*/}\r\n                     <CustomInput placeholder=\"First Name\" value={firstName} setValue={setFirstName} />\r\n                </View>\r\n                <View style={styles.container}>\r\n                     <CustomInput placeholder=\"Last Name\" value={lastName} setValue={setLastName} />\r\n                </View>\r\n                <View style={styles.container}>\r\n                     <CustomInput placeholder=\"Email\" value={email} setValue={setEmail} />\r\n                </View>\r\n                <View style={styles.container}>\r\n                     <CustomInput secureTextEntry={true} placeholder=\"Password\" value={password} setValue={setPassword} />\r\n                </View>\r\n                <View style={styles.container}>\r\n\t\t\t\t\t <CustomInput secureTextEntry={true} placeholder=\"Confirm Password\" value={passwordCheck} setValue={setPasswordCheck} />\r\n                </View>\r\n                <View style={styles.container}>\r\n                     {/*Button to Save Changes or Delete*/}\r\n                     <CustomButton text=\"Save Changes\" onPress={() => updateAccountDetails(firstName, lastName, email, password, passwordCheck)} />\r\n                </View>\r\n                <View style={styles.container}>\r\n                     {/*Button to Photo and Button to Upload*/}\r\n                            <CustomButtonSmall text=\"Choose Photo\" onPress={choosePhoto}/> <CustomButtonSmall text=\"Upload Photo\" onPress={() => uploadPhoto(photo)} />\r\n                </View>\r\n                </View>\r\n            </ScrollView>\r\n            </SafeAreaView>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n\troot: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: '#ffcfe6',\r\n\t},\r\n    header:{\r\n        backgroundColor: \"#45ded0\",\r\n        height:200,\r\n    },\r\n    avatar: {\r\n        width: 130,\r\n        height: 130,\r\n        borderRadius: 63,\r\n        borderWidth: 4,\r\n        borderColor: \"white\",\r\n        marginBottom: 10,\r\n        alignSelf: 'center',\r\n        position: 'absolute',\r\n        marginTop: 130\r\n    },\r\n    body:{\r\n        marginTop:40,\r\n    },\r\n\tcontainer: {\r\n        alignItems: 'center',\r\n        paddingTop: 10,\r\n\t},\r\n\ttitleContainer: {\r\n\t\tpaddingTop: 80,\r\n\t\tpaddingHorizontal: 40,\r\n        padding: 30,\r\n        alignSelf: 'center'\r\n\t},\r\n\tsectionTitle: {\r\n        fontSize:28,\r\n        color: \"#696969\",\r\n        fontWeight: \"600\",\r\n        alignItems: 'center',\r\n\t},\r\n    postContainer: {\r\n        justifyContent: 'space-between',\r\n        alignSelf: 'center',\r\n        alignContent: 'center',\r\n    \tbackgroundColor: '#ffffff',\r\n        width: '90%',\r\n\t\tborderColor: '#45ded0',\r\n\t\tborderWidth: 1,\t\r\n    },\r\n    post: {\r\n        fontSize:16,\r\n        color: \"#696969\",\r\n        fontWeight: 'bold',\r\n        alignItems: 'center',\r\n        paddingHorizontal: 20,\r\n        paddingVertical: 10,\r\n    }\r\n});\r\n\r\nexport default AccountSettings;"]},"metadata":{},"sourceType":"module"}